<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>Zac Ryder</title><link>https://zacryder.github.io</link><description>No blog description</description><copyright>Zac Ryder</copyright><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://yc.zackryder.top:65244/d/usb1/image/43951801.jpg?sign=EUIxaTxVCGGp2MwkLbZ5UE4KCJlfGNV1844_foMje58=:0</url><title>avatar</title><link>https://zacryder.github.io</link></image><lastBuildDate>Wed, 10 Sep 2025 02:55:52 +0000</lastBuildDate><managingEditor>Zac Ryder</managingEditor><ttl>60</ttl><webMaster>Zac Ryder</webMaster><item><title>Linuxåœ¨çº¿æ‰©å®¹ç£ç›˜</title><link>https://zacryder.github.io/post/Linux-zai-xian-kuo-rong-ci-pan.html</link><description>**åœºæ™¯1ï¼šLVMé€»è¾‘å·ç®¡ç†ï¼ˆæ¨èï¼‰**
1.**æ£€æŸ¥å½“å‰åˆ†åŒºä¸å·ç»„**
å¯åŠ¨è™šæ‹Ÿæœºåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç£ç›˜å¸ƒå±€ï¼š
````
lsblk
sudo vgdisplay  # ç¡®è®¤å·ç»„åç§°ï¼ˆå¦‚ubuntu-vgï¼‰
sudo lvs        # æŸ¥çœ‹é€»è¾‘å·ä¿¡æ¯
````
2.**åˆ›å»ºæ–°åˆ†åŒºå¹¶åŠ å…¥LVM**

* ä½¿ç”¨`fdisk`æˆ–`parted`åˆ›å»ºæ–°åˆ†åŒºï¼ˆå‡è®¾æ–°åˆ†åŒºä¸º`/dev/sda4`ï¼‰ï¼š

  ```bash
  sudo fdisk /dev/sda# 
  è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š
  n  # æ–°å»ºåˆ†åŒº
  p  # ä¸»åˆ†åŒº
  4  # åˆ†åŒºå·
  [ç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤èµ·å§‹/ç»“æŸæ‰‡åŒº]  # å ç”¨å…¨éƒ¨æœªåˆ†é…ç©ºé—´
  t  # æ›´æ”¹åˆ†åŒºç±»å‹
  4  # é€‰æ‹©åˆ†åŒºå·
  8e # LVMç±»å‹
  w  # ä¿å­˜å¹¶é€€å‡º
  ```
* æ›´æ–°å†…æ ¸åˆ†åŒºè¡¨ï¼š

  ```bash
  sudo partprobe /dev/sda
  ```
3.**æ‰©å±•ç‰©ç†å·ã€å·ç»„ä¸é€»è¾‘å·**

```bash
sudo pvcreate /dev/sda4                 # åˆ›å»ºç‰©ç†å·
sudo vgextend ubuntu-vg /dev/sda4       # æ‰©å±•å·ç»„
sudo lvextend -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv  # æ‰©å±•é€»è¾‘å·
```
4. **è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°**

    * è‹¥ä¸º`ext4`æ–‡ä»¶ç³»ç»Ÿï¼š

      ```bash
      sudo resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv
      ```
    * è‹¥ä¸º`XFS`æ–‡ä»¶ç³»ç»Ÿï¼š

      ```bash
      sudo xfs_growfs /
      ```
5. **éªŒè¯æ‰©å®¹ç»“æœ**

    ```bash
    df -h | grep ' /$'  # ç¡®è®¤æ ¹åˆ†åŒºå®¹é‡å·²æ›´æ–°
    ```
#### **åœºæ™¯2ï¼šéLVMåˆ†åŒºï¼ˆç›´æ¥æ‰©å±•ï¼‰**

1. **ä½¿ç”¨**â€‹**â€‹`parted`â€‹**â€‹**è°ƒæ•´åˆ†åŒºå¤§å°**

    ```bash
    sudo parted /dev/sda(parted) resizepart 3 100%  # å‡è®¾éœ€æ‰©å±•çš„åˆ†åŒºå·ä¸º3(parted) quit
    ```
2. **è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°**

    * å¯¹äº`ext4`ï¼š

      ```bash
      sudo resize2fs /dev/sda3
      ```
    * å¯¹äº`XFS`ï¼š

      ```bash
      sudo xfs_growfs /dev/sda3
      ```
### **ä¸‰ã€è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆè¿›é˜¶ç”¨æˆ·ï¼‰**

ä»¥ä¸‹è„šæœ¬å¯ç®€åŒ–LVMç¯å¢ƒä¸‹çš„æ‰©å®¹æµç¨‹ï¼ˆéœ€æ ¹æ®å®é™…ç¯å¢ƒè°ƒæ•´å‚æ•°ï¼‰ï¼š

```bash
#!/bin/bash
# æ‰©å®¹LVMé€»è¾‘å·çš„è„šæœ¬
read -p 'è¯·è¾“å…¥æ–°åˆ†åŒºè®¾å¤‡è·¯å¾„ï¼ˆå¦‚/dev/sda4ï¼‰: ' NEW_PARTITION
read -p 'è¯·è¾“å…¥å·ç»„åç§°ï¼ˆå¦‚ubuntu-vgï¼‰: ' VG_NAME
read -p 'è¯·è¾“å…¥é€»è¾‘å·è·¯å¾„ï¼ˆå¦‚/dev/mapper/ubuntu--vg-ubuntu--lvï¼‰: ' LV_PATH

# åˆ›å»ºç‰©ç†å·å¹¶æ‰©å±•å·ç»„
sudo pvcreate $NEW_PARTITION &amp;&amp; \
sudo vgextend $VG_NAME $NEW_PARTITION &amp;&amp; \

# æ‰©å±•é€»è¾‘å·å¹¶è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ
sudo lvextend -l +100%FREE $LV_PATH &amp;&amp; \
if [ -f '/sbin/resize2fs' ]; then
    sudo resize2fs $LV_PATH
elif [ -f '/sbin/xfs_growfs' ]; then
    sudo xfs_growfs $(df -h | awk '$NF=='/'{print $1}')
else
    echo 'æœªæ£€æµ‹åˆ°æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿè°ƒæ•´å·¥å…·ï¼'
    exit 1
fi

echo 'æ‰©å®¹å®Œæˆï¼å½“å‰æ ¹åˆ†åŒºå¤§å°ï¼š'
df -h | grep ' /$'
```ã€‚</description><guid isPermaLink="true">https://zacryder.github.io/post/Linux-zai-xian-kuo-rong-ci-pan.html</guid><pubDate>Wed, 10 Sep 2025 02:45:37 +0000</pubDate></item><item><title>ubuntu2204-ç­‰ä¿2.0è„šæœ¬</title><link>https://zacryder.github.io/post/ubuntu2204--deng-bao-2.0-jiao-ben.html</link><description>````
#!/bin/bash

set -euo pipefail

# ----------------------------
# å…¨å±€å˜é‡å®šä¹‰
# ----------------------------
LOG_FILE='/var/log/security_hardening_$(date +%Y%m%d).log'
BACKUP_DIR='/root/security_backup_$(date +%Y%m%d%H%M%S)'
SCRIPT_NAME=$(basename '$0')

# ç½‘ç»œç™½åå•ï¼ˆå¯å¤–éƒ¨ä¿®æ”¹ï¼‰
SSH_ALLOWED_NETWORKS=(
    '10.18.10.0/255.255.255.0'
    '219.144.190.16/255.255.255.252'
    '192.168.101.0/255.255.255.0'
)

# æ—¥å¿—å‡½æ•°
log() {
    echo '[$(date '+%Y-%m-%d %H:%M:%S')] $1' | tee -a '$LOG_FILE'
}

error() {
    echo '[$(date '+%Y-%m-%d %H:%M:%S')] ERROR: $1' &gt;&amp;2 | tee -a '$LOG_FILE'
    exit 1
}

warn() {
    echo '[$(date '+%Y-%m-%d %H:%M:%S')] WARNING: $1' | tee -a '$LOG_FILE'
}

# ----------------------------
# ç³»ç»Ÿæƒé™ä¸å…¼å®¹æ€§æ£€æŸ¥
# ----------------------------
if [[ $EUID -ne 0 ]]; then
    error 'æ­¤è„šæœ¬å¿…é¡»ä»¥ root æƒé™è¿è¡Œ'
fi

# æ£€æŸ¥æ˜¯å¦ä¸º Ubuntu 22.04
if [[ ! -f /etc/os-release ]]; then
    error '/etc/os-release ä¸å­˜åœ¨ï¼Œæ— æ³•è¯†åˆ«ç³»ç»Ÿ'
fi

source /etc/os-release
if [[ '$ID' != 'ubuntu' ]] || [[ '$VERSION_ID' != '22.04' ]]; then
    warn 'å½“å‰ç³»ç»Ÿä¸º $ID $VERSION_IDï¼Œä»…æµ‹è¯•äº Ubuntu 22.04ï¼Œå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜'
fi

log 'å¼€å§‹å®‰å…¨åŠ å›ºæµç¨‹'

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p '$BACKUP_DIR'
log 'å¤‡ä»½ç›®å½•å·²åˆ›å»º: $BACKUP_DIR'

# ----------------------------
# åŸºç¡€ä¾èµ–å®‰è£…
# ----------------------------
log '=== å®‰è£…å¿…è¦ä¾èµ– ==='
apt update -y &gt;&gt; '$LOG_FILE' 2&gt;&amp;1
apt install -y auditd libpam-pwquality rsyslog &gt;&gt; '$LOG_FILE' 2&gt;&amp;1

# ----------------------------
# å®‰å…¨å®¡è®¡é…ç½® (auditd)
# ----------------------------
log '=== é…ç½®å®‰å…¨å®¡è®¡ (auditd) ==='

for service in auditd rsyslog; do
    if systemctl is-active --quiet '$service'; then
        systemctl reload-or-restart '$service' &gt;&gt; '$LOG_FILE' 2&gt;&amp;1
    else
        systemctl start '$service' &gt;&gt; '$LOG_FILE' 2&gt;&amp;1
    fi
    systemctl enable '$service' &gt;&gt; '$LOG_FILE' 2&gt;&amp;1
done

AUDIT_RULES_FILE='/etc/audit/rules.d/10-security.rules'
if [[ -f '$AUDIT_RULES_FILE' ]]; then
    cp -p '$AUDIT_RULES_FILE' '$BACKUP_DIR/'
    log 'å·²å¤‡ä»½ $AUDIT_RULES_FILE'
fi

cat &lt;&lt; 'EOF' &gt; '$AUDIT_RULES_FILE'
# æ–‡ä»¶åˆ é™¤æ“ä½œå®¡è®¡
-a always,exit -F arch=b64 -S unlink,unlinkat,rename,renameat -F auid&gt;=1000 -F auid!=4294967295 -k file_delete
-a always,exit -F arch=b32 -S unlink,unlinkat,rename,renameat -F auid&gt;=1000 -F auid!=4294967295 -k file_delete

# èº«ä»½æ–‡ä»¶å®¡è®¡
-w /etc/group -p wa -k identity
-w /etc/passwd -p wa -k identity
-w /etc/gshadow -p wa -k identity
-w /etc/shadow -p wa -k identity
-w /etc/security/opasswd -p wa -k identity

# æƒé™å˜æ›´å®¡è®¡
-w /etc/sudoers -p wa -k privilege_change
-w /etc/sudoers.d/ -p wa -k privilege_change
EOF

# ç¡®ä¿ auditd æ­£åœ¨è¿è¡Œå†åŠ è½½è§„åˆ™
systemctl is-active auditd || systemctl start auditd
augenrules --load &gt;&gt; '$LOG_FILE' 2&gt;&amp;1
systemctl reload-or-restart auditd &gt;&gt; '$LOG_FILE' 2&gt;&amp;1

# ----------------------------
# è®¿é—®æ§åˆ¶ä¸æƒé™ä¿®å¤
# ----------------------------
log '=== é…ç½®è®¿é—®æ§åˆ¶ä¸æƒé™ä¿®å¤ ==='

# é…ç½® suï¼šä»…å…è®¸ sudo ç»„
SU_PAM_FILE='/etc/pam.d/su'
if [[ -f '$SU_PAM_FILE' ]]; then
    cp -p '$SU_PAM_FILE' '$BACKUP_DIR/'
    if ! grep -q 'pam_group.so' '$SU_PAM_FILE'; then
        sed -i '/pam_rootok.so/a auth       sufficient   pam_group.so trust use_uid' '$SU_PAM_FILE'
        log 'å·²å¯ç”¨ pam_group.so é™åˆ¶ su æƒé™'
    fi
else
    warn '$SU_PAM_FILE ä¸å­˜åœ¨ï¼Œæ— æ³•é™åˆ¶ su'
fi

# è®¾ç½®å…¨å±€ umask
if ! grep -q 'umask 027' /etc/profile; then
    echo 'umask 027' &gt;&gt; /etc/profile
    log 'å·²è®¾ç½® umask 027'
fi

# ä¿®å¤ç”¨æˆ·å®¶ç›®å½•æƒé™
find /home -mindepth 1 -maxdepth 1 -type d | while read -r homedir; do
    user=$(basename '$homedir')
    if id '$user' &amp;&gt;/dev/null &amp;&amp; [[ '$user' != 'root' ]]; then
        chown '$user:$user' '$homedir'
        chmod 750 '$homedir'
        log 'å·²ä¿®å¤ç”¨æˆ· $user å®¶ç›®å½•æƒé™: 750'
    fi
done

# SSH å®‰å…¨é…ç½®
SSH_CONFIG='/etc/ssh/sshd_config'
if [[ -f '$SSH_CONFIG' ]]; then
    cp -p '$SSH_CONFIG' '$BACKUP_DIR/'
    
    # ä½¿ç”¨æ­£åˆ™ç²¾ç¡®æ›¿æ¢æˆ–æ·»åŠ 
    sed -i -E 's/^#?(PermitRootLogin)\s+.*/\1 no/' '$SSH_CONFIG'
    sed -i -E 's/^#?(MaxAuthTries)\s+.*/\1 5/' '$SSH_CONFIG'
    sed -i '/^AllowGroups/d' '$SSH_CONFIG'
    echo 'AllowGroups sudo' &gt;&gt; '$SSH_CONFIG'
    
    # é‡è½½ SSH æœåŠ¡
    systemctl reload sshd &gt;&gt; '$LOG_FILE' 2&gt;&amp;1
    log 'SSH é…ç½®å·²æ›´æ–°'
else
    error '$SSH_CONFIG ä¸å­˜åœ¨ï¼Œæ— æ³•é…ç½® SSH'
fi

# é”å®šæ— å…³ç³»ç»Ÿè´¦æˆ·
for user in shutdown halt; do
    if id '$user' &amp;&gt;/dev/null; then
        usermod -L '$user' 2&gt;/dev/null || true
        passwd -l '$user' 2&gt;/dev/null || true
        log 'å·²é”å®šç”¨æˆ·: $user'
    fi
done

# å…³é”®æ–‡ä»¶æƒé™
chmod 644 /etc/passwd /etc/group
chmod 600 /etc/shadow /etc/gshadow
chmod 600 /etc/ssh/sshd_config
chown root:root /etc/ssh/sshd_config
log 'å…³é”®æ–‡ä»¶æƒé™å·²ä¿®å¤'

# ----------------------------
# å…¥ä¾µé˜²èŒƒï¼šTCP Wrappers
# ----------------------------
log '=== é…ç½®ç½‘ç»œè®¿é—®æ§åˆ¶ (TCP Wrappers) ==='

# ç”Ÿæˆ hosts.allow
&gt; /etc/hosts.allow
for net in '${SSH_ALLOWED_NETWORKS[@]}'; do
    echo 'sshd : $net' &gt;&gt; /etc/hosts.allow
done
echo 'ALL : ALL' &gt; /etc/hosts.deny

log 'TCP Wrappers å·²é…ç½®ï¼Œå…è®¸ SSH æ¥æº: ${SSH_ALLOWED_NETWORKS[*]}'

# ----------------------------
# èº«ä»½é‰´åˆ«ï¼šPAM ä¸å¯†ç ç­–ç•¥
# ----------------------------
log '=== é…ç½®èº«ä»½é‰´åˆ«ç­–ç•¥ ==='

PAM_AUTH='/etc/pam.d/common-auth'

if [[ -f '$PAM_AUTH' ]]; then
    cp -p '$PAM_AUTH' '$BACKUP_DIR/'

    # ç¡®ä¿é…ç½®é¡ºåºæ­£ç¡®
    cat &gt; '$PAM_AUTH' &lt;&lt;EOF
auth    required    pam_faillock.so preauth silent deny=5 unlock_time=900
auth    optional    pam_faillock.so authsucc
auth    [success=1 default=ignore]      pam_unix.so nullok
auth    required    pam_faillock.so authfail deny=5 unlock_time=900
EOF

    log 'è´¦æˆ·é”å®šç­–ç•¥å·²é…ç½® (5æ¬¡å¤±è´¥ï¼Œé”å®š15åˆ†é’Ÿ)'
else
    warn '$PAM_AUTH ä¸å­˜åœ¨ï¼Œè·³è¿‡è´¦æˆ·é”å®šé…ç½®'
fi

# å¯†ç å¤æ‚åº¦ (pwquality)
PAM_PASS='/etc/pam.d/common-password'
BACKUP_DIR='/path/to/backup'
LOG_FILE='/var/log/pam_config.log'

if [[ -f '$PAM_PASS' ]]; then
    # åˆ›å»ºå¤‡ä»½ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
    mkdir -p '$BACKUP_DIR'
    if ! cp -p '$PAM_PASS' '$BACKUP_DIR/$(basename $PAM_PASS).$(date +%Y%m%d%H%M%S)'; then
        echo '[$(date)] å¤‡ä»½å¤±è´¥: $PAM_PASS' &gt;&gt; '$LOG_FILE'
        exit 1
    fi

    # åˆ é™¤æ—§çš„ pam_pwquality.so é…ç½®
    if ! sed -i '/^password.*pam_pwquality.so/d' '$PAM_PASS'; then
        echo '[$(date)] åˆ é™¤æ—§é…ç½®å¤±è´¥' &gt;&gt; '$LOG_FILE'
        exit 1
    fi

    # æ’å…¥æ–°é…ç½®åˆ° pam_unix.so å‰
    if grep -q '^password.*pam_unix.so' '$PAM_PASS'; then
        if ! sed -i '/^password.*pam_unix\.so/i password    requisite     pam_pwquality.so try_first_pass retry=5 minlen=11 minclass=3 enforce_for_root' '$PAM_PASS'; then
            echo '[$(date)] æ’å…¥æ–°é…ç½®å¤±è´¥' &gt;&gt; '$LOG_FILE'
            exit 1
        fi
        echo '[$(date)] å¯†ç å¤æ‚åº¦ç­–ç•¥å·²è®¾ç½® (minlen=11, minclass=3)' &gt;&gt; '$LOG_FILE'
    else
        echo '[$(date)] æœªæ‰¾åˆ° pam_unix.so è¡Œï¼Œè·³è¿‡æ’å…¥' &gt;&gt; '$LOG_FILE'
    fi
else
    echo '[$(date)] $PAM_PASS ä¸å­˜åœ¨ï¼Œè·³è¿‡å¯†ç å¤æ‚åº¦é…ç½®' &gt;&gt; '$LOG_FILE'
fi



# å…¨å±€å¯†ç ç­–ç•¥
LOGIN_DEFS='/etc/login.defs'
for param in PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE; do
    sed -i '/^$param/d' '$LOGIN_DEFS' 2&gt;/dev/null || true
done

{
    echo 'PASS_MAX_DAYS   90'
    echo 'PASS_MIN_DAYS   7'
    echo 'PASS_WARN_AGE   7'
} &gt;&gt; '$LOGIN_DEFS'

# åº”ç”¨åˆ° guangxigw ç”¨æˆ·
if id guangxigw &amp;&gt;/dev/null; then
    chage --maxdays 90 --mindays 7 --warndays 7 guangxigw
    log 'å·²ä¸ºç”¨æˆ· guangxigw åº”ç”¨å¯†ç ç­–ç•¥'
fi

# ä¼šè¯è¶…æ—¶
TIMEOUT_SCRIPT='/etc/profile.d/99-timeout.sh'
cat &gt; '$TIMEOUT_SCRIPT' &lt;&lt; 'EOF'
readonly TMOUT=900
export TMOUT
EOF
chmod +x '$TIMEOUT_SCRIPT'
log 'ä¼šè¯è¶…æ—¶å·²è®¾ç½®: 900ç§’'

# ----------------------------
# æ¸…ç†ç©ºå¯†ç è´¦æˆ·
# ----------------------------
log '=== æ¸…ç†ç©ºå¯†ç è´¦æˆ· ==='
awk -F: '($2 == '' &amp;&amp; $1 != 'root') {print $1}' /etc/shadow | while read -r user; do
    if [[ -n '$user' ]]; then
        passwd -l '$user'
        log 'å·²é”å®šç©ºå¯†ç ç”¨æˆ·: $user'
    fi
done

# ----------------------------
# é…ç½®éªŒè¯ä¸æŠ¥å‘Š
# ----------------------------
log '=== é…ç½®éªŒè¯æŠ¥å‘Š ==='

echo -e '\nã€æœåŠ¡çŠ¶æ€ã€‘' | tee -a '$LOG_FILE'
for svc in auditd rsyslog sshd; do
    if systemctl is-active '$svc' &gt;/dev/null; then
        echo 'âœ… $svc æ­£åœ¨è¿è¡Œ' | tee -a '$LOG_FILE'
    else
        echo 'âŒ $svc æœªè¿è¡Œ' | tee -a '$LOG_FILE'
    fi
done

echo -e '\nã€SSH é…ç½®ã€‘' | tee -a '$LOG_FILE'
grep -E 'PermitRootLogin|MaxAuthTries|AllowGroups' /etc/ssh/sshd_config | sed 's/^/   /' | tee -a '$LOG_FILE'

echo -e '\nã€å¯†ç ç­–ç•¥ã€‘' | tee -a '$LOG_FILE'
grep -E '^PASS_MAX_DAYS|^PASS_MIN_DAYS|^PASS_WARN_AGE' /etc/login.defs | sed 's/^/   /' | tee -a '$LOG_FILE'

echo -e '\nã€å®¡è®¡è§„åˆ™ã€‘' | tee -a '$LOG_FILE'
rule_count=$(auditctl -l 2&gt;/dev/null | wc -l || echo 0)
echo '   åŠ è½½è§„åˆ™æ•°: $rule_count æ¡' | tee -a '$LOG_FILE'

echo -e '\nã€å…³é”®æ–‡ä»¶æƒé™ã€‘' | tee -a '$LOG_FILE'
ls -l /etc/passwd /etc/shadow /etc/group /etc/gshadow /etc/ssh/sshd_config 2&gt;/dev/null | sed 's/^/   /' | tee -a '$LOG_FILE'

# ----------------------------
# å®Œæˆæç¤º
# ----------------------------
log 'âœ… å®‰å…¨åŠ å›ºå®Œæˆ'
cat &lt;&lt; EOF

==================================================
âœ… å®‰å…¨åŠ å›ºå·²å®Œæˆï¼
ğŸ“ å¤‡ä»½è·¯å¾„: $BACKUP_DIR
ğŸ“„ æ—¥å¿—æ–‡ä»¶: $LOG_FILE
ğŸ’¡ å»ºè®®ï¼š
   1. ä¿ç•™å½“å‰ä¼šè¯ï¼Œæµ‹è¯•æ–° SSH ç™»å½•æ˜¯å¦æ­£å¸¸
   2. éªŒè¯ sudo ç”¨æˆ·èƒ½å¦ su åˆ‡æ¢
   3. æ£€æŸ¥ guangxigw ç”¨æˆ·å¯†ç ç­–ç•¥æ˜¯å¦ç”Ÿæ•ˆ
   4. ç”Ÿäº§ç¯å¢ƒå»ºè®®æ‹©æœºé‡å¯ä»¥åŠ è½½å®¡è®¡è§„åˆ™
   5. æ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒè°ƒæ•´ /etc/hosts.allow
==================================================
EOF`
````ã€‚</description><guid isPermaLink="true">https://zacryder.github.io/post/ubuntu2204--deng-bao-2.0-jiao-ben.html</guid><pubDate>Wed, 10 Sep 2025 01:51:02 +0000</pubDate></item><item><title>Dockerå’Œk8sæ ¸å¿ƒæ¦‚å¿µ</title><link>https://zacryder.github.io/post/Docker-he-k8s-he-xin-gai-nian.html</link><description>**ç›®å½•ï¼š**&#13;
ä¸€. Dockeræ ¸å¿ƒæ¦‚å¿µ&#13;
äºŒ. Kubernetesæ˜¯ä»€ä¹ˆåŠæ¶æ„&#13;
ä¸‰. Kubernetesæ ¸å¿ƒæ¦‚å¿µ&#13;
# ä¸€ã€Dockeræ ¸å¿ƒæ¦‚å¿µ&#13;
![640](https://github.com/user-attachments/assets/bbba04d0-6aaa-49f4-91e0-2da197782903)&#13;
## 1ã€ä¸ºä»€ä¹ˆæ˜¯Docker&#13;
![2](https://github.com/user-attachments/assets/97aec6ce-7827-4ee8-b702-af601cbcadb4)&#13;
**è™šæ‹Ÿæœºï¼š**&#13;
åŸºç¡€è®¾æ–½ï¼ˆInfrastructureï¼‰ã€‚</description><guid isPermaLink="true">https://zacryder.github.io/post/Docker-he-k8s-he-xin-gai-nian.html</guid><pubDate>Tue, 03 Dec 2024 04:12:36 +0000</pubDate></item><item><title>LinuxåŸºç¡€</title><link>https://zacryder.github.io/post/Linux-ji-chu.html</link><description>1ã€åŸºæœ¬å‘½ä»¤&#13;
```shell&#13;
uname -m æ˜¾ç¤ºæœºå™¨çš„å¤„ç†å™¨æ¶æ„&#13;
uname -r æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬&#13;
dmidecode -q æ˜¾ç¤ºç¡¬ä»¶ç³»ç»Ÿéƒ¨ä»¶&#13;
(SMBIOS / DMI) hdparm -i /dev/hda ç½—åˆ—ä¸€ä¸ªç£ç›˜çš„æ¶æ„ç‰¹æ€§&#13;
hdparm -tT /dev/sda åœ¨ç£ç›˜ä¸Šæ‰§è¡Œæµ‹è¯•æ€§è¯»å–æ“ä½œç³»ç»Ÿä¿¡æ¯&#13;
arch æ˜¾ç¤ºæœºå™¨çš„å¤„ç†å™¨æ¶æ„&#13;
uname -m æ˜¾ç¤ºæœºå™¨çš„å¤„ç†å™¨æ¶æ„&#13;
uname -r æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬&#13;
dmidecode -q æ˜¾ç¤ºç¡¬ä»¶ç³»ç»Ÿéƒ¨ä»¶ - (SMBIOS / DMI)&#13;
hdparm -i /dev/hda ç½—åˆ—ä¸€ä¸ªç£ç›˜çš„æ¶æ„ç‰¹æ€§&#13;
hdparm -tT /dev/sda åœ¨ç£ç›˜ä¸Šæ‰§è¡Œæµ‹è¯•æ€§è¯»å–æ“ä½œ&#13;
cat /proc/cpuinfo æ˜¾ç¤ºCPU infoçš„ä¿¡æ¯&#13;
cat /proc/interrupts æ˜¾ç¤ºä¸­æ–­&#13;
cat /proc/meminfo æ ¡éªŒå†…å­˜ä½¿ç”¨&#13;
cat /proc/swaps æ˜¾ç¤ºå“ªäº›swapè¢«ä½¿ç”¨&#13;
cat /proc/version æ˜¾ç¤ºå†…æ ¸çš„ç‰ˆæœ¬&#13;
cat /proc/net/dev æ˜¾ç¤ºç½‘ç»œé€‚é…å™¨åŠç»Ÿè®¡&#13;
cat /proc/mounts æ˜¾ç¤ºå·²åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿ&#13;
lspci -tv ç½—åˆ— PCI è®¾å¤‡&#13;
lsusb -tv æ˜¾ç¤º USB è®¾å¤‡&#13;
date æ˜¾ç¤ºç³»ç»Ÿæ—¥æœŸ&#13;
cal 2007 æ˜¾ç¤º2007å¹´çš„æ—¥å†è¡¨&#13;
date 041217002007.00 è®¾ç½®æ—¥æœŸå’Œæ—¶é—´ - æœˆæ—¥æ—¶åˆ†å¹´.ç§’&#13;
clock -w å°†æ—¶é—´ä¿®æ”¹ä¿å­˜åˆ° BIOS&#13;
```&#13;
2ã€å…³æœº&#13;
```shell&#13;
shutdown -h now å…³é—­ç³»ç»Ÿ(1)&#13;
init 0 å…³é—­ç³»ç»Ÿ(2)&#13;
telinit 0 å…³é—­ç³»ç»Ÿ(3)&#13;
shutdown -h hours:minutes &amp; æŒ‰é¢„å®šæ—¶é—´å…³é—­ç³»ç»Ÿ&#13;
shutdown -c å–æ¶ˆæŒ‰é¢„å®šæ—¶é—´å…³é—­ç³»ç»Ÿ&#13;
shutdown -r now é‡å¯(1)&#13;
reboot é‡å¯(2)&#13;
logout æ³¨é”€&#13;
```&#13;
3ã€æ–‡ä»¶å’Œç›®å½•&#13;
```shell&#13;
cd /home è¿›å…¥ '/ home' ç›®å½•'&#13;
cd .. è¿”å›ä¸Šä¸€çº§ç›®å½•&#13;
cd ../.. è¿”å›ä¸Šä¸¤çº§ç›®å½•&#13;
cd è¿›å…¥ä¸ªäººçš„ä¸»ç›®å½•&#13;
cd ~user1 è¿›å…¥ä¸ªäººçš„ä¸»ç›®å½•&#13;
cd - è¿”å›ä¸Šæ¬¡æ‰€åœ¨çš„ç›®å½•&#13;
pwd æ˜¾ç¤ºå·¥ä½œè·¯å¾„&#13;
ls æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶&#13;
ls -F æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶&#13;
ls -l æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„è¯¦ç»†èµ„æ–™&#13;
ls -a æ˜¾ç¤ºéšè—æ–‡ä»¶&#13;
ls *[0-9]* æ˜¾ç¤ºåŒ…å«æ•°å­—çš„æ–‡ä»¶åå’Œç›®å½•å&#13;
tree æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•ç”±æ ¹ç›®å½•å¼€å§‹çš„æ ‘å½¢ç»“æ„(1)&#13;
lstree æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•ç”±æ ¹ç›®å½•å¼€å§‹çš„æ ‘å½¢ç»“æ„(2)&#13;
mkdir dir1 åˆ›å»ºä¸€ä¸ªå«åš 'dir1' çš„ç›®å½•'&#13;
mkdir dir1 dir2 åŒæ—¶åˆ›å»ºä¸¤ä¸ªç›®å½•&#13;
mkdir -p /tmp/dir1/dir2 åˆ›å»ºä¸€ä¸ªç›®å½•æ ‘&#13;
rm -f file1 åˆ é™¤ä¸€ä¸ªå«åš 'file1' çš„æ–‡ä»¶'&#13;
rmdir dir1 åˆ é™¤ä¸€ä¸ªå«åš 'dir1' çš„ç›®å½•'&#13;
rm -rf dir1 åˆ é™¤ä¸€ä¸ªå«åš 'dir1' çš„ç›®å½•å¹¶åŒæ—¶åˆ é™¤å…¶å†…å®¹&#13;
rm -rf dir1 dir2 åŒæ—¶åˆ é™¤ä¸¤ä¸ªç›®å½•åŠå®ƒä»¬çš„å†…å®¹&#13;
mv dir1 new_dir é‡å‘½å/ç§»åŠ¨ ä¸€ä¸ªç›®å½•&#13;
cp file1 file2 å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶&#13;
cp dir/* . å¤åˆ¶ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°å½“å‰å·¥ä½œç›®å½•&#13;
cp -a /tmp/dir1 . å¤åˆ¶ä¸€ä¸ªç›®å½•åˆ°å½“å‰å·¥ä½œç›®å½•&#13;
cp -a dir1 dir2 å¤åˆ¶ä¸€ä¸ªç›®å½•&#13;
ln -s file1 lnk1 åˆ›å»ºä¸€ä¸ªæŒ‡å‘æ–‡ä»¶æˆ–ç›®å½•çš„è½¯é“¾æ¥&#13;
ln file1 lnk1 åˆ›å»ºä¸€ä¸ªæŒ‡å‘æ–‡ä»¶æˆ–ç›®å½•çš„ç‰©ç†é“¾æ¥&#13;
touch -t 0712250000 file1 ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„æ—¶é—´æˆ³ - (YYMMDDhhmm)&#13;
file file1 outputs the mime type of the file as text&#13;
iconv -l åˆ—å‡ºå·²çŸ¥çš„ç¼–ç &#13;
iconv -f fromEncoding -t toEncoding inputFile &gt; outputFile creates a new from the given input file by assuming it is encoded in fromEncoding and converting it to toEncoding.&#13;
find . -maxdepth 1 -name *.jpg -print -exec convert '{}' -resize 80x60 'thumbs/{}' \; batch resize files in the current directory and send them to a thumbnails directory (requires convert from Imagemagick)&#13;
```&#13;
4ã€æ–‡ä»¶æœç´¢&#13;
```shell&#13;
find / -name file1 ä» '/' å¼€å§‹è¿›å…¥æ ¹æ–‡ä»¶ç³»ç»Ÿæœç´¢æ–‡ä»¶å’Œç›®å½•&#13;
find / -user user1 æœç´¢å±äºç”¨æˆ· 'user1' çš„æ–‡ä»¶å’Œç›®å½•&#13;
find /home/user1 -name \*.bin åœ¨ç›®å½• '/ home/user1' ä¸­æœç´¢å¸¦æœ‰'.bin' ç»“å°¾çš„æ–‡ä»¶&#13;
find /usr/bin -type f -atime +100 æœç´¢åœ¨è¿‡å»100å¤©å†…æœªè¢«ä½¿ç”¨è¿‡çš„æ‰§è¡Œæ–‡ä»¶&#13;
find /usr/bin -type f -mtime -10 æœç´¢åœ¨10å¤©å†…è¢«åˆ›å»ºæˆ–è€…ä¿®æ”¹è¿‡çš„æ–‡ä»¶&#13;
find / -name \*.rpm -exec chmod 755 '{}' \; æœç´¢ä»¥ '.rpm' ç»“å°¾çš„æ–‡ä»¶å¹¶å®šä¹‰å…¶æƒé™&#13;
find / -xdev -name \*.rpm æœç´¢ä»¥ '.rpm' ç»“å°¾çš„æ–‡ä»¶ï¼Œå¿½ç•¥å…‰é©±ã€æ·ç›˜ç­‰å¯ç§»åŠ¨è®¾å¤‡&#13;
locate \*.ps å¯»æ‰¾ä»¥ '.ps' ç»“å°¾çš„æ–‡ä»¶ - å…ˆè¿è¡Œ 'updatedb' å‘½ä»¤&#13;
whereis halt æ˜¾ç¤ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€æºç æˆ–mançš„ä½ç½®&#13;
which halt æ˜¾ç¤ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„&#13;
```&#13;
5ã€æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ&#13;
```shell&#13;
mount /dev/hda2 /mnt/hda2 æŒ‚è½½ä¸€ä¸ªå«åšhda2çš„ç›˜ - ç¡®å®šç›®å½• '/ mnt/hda2' å·²ç»å­˜åœ¨&#13;
umount /dev/hda2 å¸è½½ä¸€ä¸ªå«åšhda2çš„ç›˜ - å…ˆä»æŒ‚è½½ç‚¹ '/ mnt/hda2' é€€å‡º&#13;
fuser -km /mnt/hda2 å½“è®¾å¤‡ç¹å¿™æ—¶å¼ºåˆ¶å¸è½½&#13;
umount -n /mnt/hda2 è¿è¡Œå¸è½½æ“ä½œè€Œä¸å†™å…¥ /etc/mtab æ–‡ä»¶- å½“æ–‡ä»¶ä¸ºåªè¯»æˆ–å½“ç£ç›˜å†™æ»¡æ—¶éå¸¸æœ‰ç”¨&#13;
mount /dev/fd0 /mnt/floppy æŒ‚è½½ä¸€ä¸ªè½¯ç›˜&#13;
mount /dev/cdrom /mnt/cdrom æŒ‚è½½ä¸€ä¸ªcdromæˆ–dvdrom&#13;
mount /dev/hdc /mnt/cdrecorder æŒ‚è½½ä¸€ä¸ªcdrwæˆ–dvdrom&#13;
mount /dev/hdb /mnt/cdrecorder æŒ‚è½½ä¸€ä¸ªcdrwæˆ–dvdrom&#13;
mount -o loop file.iso /mnt/cdrom æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶æˆ–ISOé•œåƒæ–‡ä»¶&#13;
mount -t vfat /dev/hda5 /mnt/hda5 æŒ‚è½½ä¸€ä¸ªWindows FAT32æ–‡ä»¶ç³»ç»Ÿ&#13;
mount /dev/sda1 /mnt/usbdisk æŒ‚è½½ä¸€ä¸ªusb æ·ç›˜æˆ–é—ªå­˜è®¾å¤‡&#13;
mount -t smbfs -o username=user,password=pass //WinClient/share /mnt/share æŒ‚è½½ä¸€ä¸ªwindowsç½‘ç»œå…±äº«&#13;
```&#13;
6ã€ç£ç›˜ç©ºé—´&#13;
```shell&#13;
df -h æ˜¾ç¤ºå·²ç»æŒ‚è½½çš„åˆ†åŒºåˆ—è¡¨&#13;
ls -lSr |more ä»¥å°ºå¯¸å¤§å°æ’åˆ—æ–‡ä»¶å’Œç›®å½•&#13;
du -sh dir1 ä¼°ç®—ç›®å½• 'dir1' å·²ç»ä½¿ç”¨çš„ç£ç›˜ç©ºé—´'&#13;
du -sk * | sort -rn ä»¥å®¹é‡å¤§å°ä¸ºä¾æ®ä¾æ¬¡æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„å¤§å°&#13;
rpm -q -a --qf '%10{SIZE}t%{NAME}n' | sort -k1,1n ä»¥å¤§å°ä¸ºä¾æ®ä¾æ¬¡æ˜¾ç¤ºå·²å®‰è£…çš„rpmåŒ…æ‰€ä½¿ç”¨çš„ç©ºé—´ (fedora, redhatç±»ç³»ç»Ÿ)&#13;
dpkg-query -W -f='${Installed-Size;10}t${Package}n' | sort -k1,1n ä»¥å¤§å°ä¸ºä¾æ®æ˜¾ç¤ºå·²å®‰è£…çš„debåŒ…æ‰€ä½¿ç”¨çš„ç©ºé—´ (ubuntu, debianç±»ç³»ç»Ÿ)&#13;
```&#13;
7ã€ç”¨æˆ·å’Œç¾¤ç»„&#13;
```shell&#13;
groupadd group_name åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ç»„&#13;
groupdel group_name åˆ é™¤ä¸€ä¸ªç”¨æˆ·ç»„&#13;
groupmod -n new_group_name old_group_name é‡å‘½åä¸€ä¸ªç”¨æˆ·ç»„&#13;
useradd -c 'Name Surname ' -g admin -d /home/user1 -s /bin/bash user1 åˆ›å»ºä¸€ä¸ªå±äº 'admin' ç”¨æˆ·ç»„çš„ç”¨æˆ·&#13;
useradd user1 åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·&#13;
userdel -r user1 åˆ é™¤ä¸€ä¸ªç”¨æˆ· ( '-r' æ’é™¤ä¸»ç›®å½•)&#13;
usermod -c 'User FTP' -g system -d /ftp/user1 -s /bin/nologin user1 ä¿®æ”¹ç”¨æˆ·å±æ€§&#13;
passwd ä¿®æ”¹å£ä»¤&#13;
passwd user1 ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·çš„å£ä»¤ (åªå…è®¸rootæ‰§è¡Œ)&#13;
chage -E 2005-12-31 user1 è®¾ç½®ç”¨æˆ·å£ä»¤çš„å¤±æ•ˆæœŸé™&#13;
pwck æ£€æŸ¥ '/etc/passwd' çš„æ–‡ä»¶æ ¼å¼å’Œè¯­æ³•ä¿®æ­£ä»¥åŠå­˜åœ¨çš„ç”¨æˆ·&#13;
grpck æ£€æŸ¥ '/etc/passwd' çš„æ–‡ä»¶æ ¼å¼å’Œè¯­æ³•ä¿®æ­£ä»¥åŠå­˜åœ¨çš„ç¾¤ç»„&#13;
newgrp group_name ç™»é™†è¿›ä¸€ä¸ªæ–°çš„ç¾¤ç»„ä»¥æ”¹å˜æ–°åˆ›å»ºæ–‡ä»¶çš„é¢„è®¾ç¾¤ç»„&#13;
```&#13;
8ã€æ–‡ä»¶çš„æƒé™&#13;
```shell&#13;
ls -lh æ˜¾ç¤ºæƒé™&#13;
ls /tmp | pr -T5 -W$COLUMNS å°†ç»ˆç«¯åˆ’åˆ†æˆ5æ æ˜¾ç¤º&#13;
chmod ugo+rwx directory1 è®¾ç½®ç›®å½•çš„æ‰€æœ‰äºº(u)ã€ç¾¤ç»„(g)ä»¥åŠå…¶ä»–äºº(o)ä»¥è¯»ï¼ˆr ï¼‰ã€å†™(w)å’Œæ‰§è¡Œ(x)çš„æƒé™&#13;
chmod go-rwx directory1 åˆ é™¤ç¾¤ç»„(g)ä¸å…¶ä»–äºº(o)å¯¹ç›®å½•çš„è¯»å†™æ‰§è¡Œæƒé™&#13;
chown user1 file1 æ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰äººå±æ€§&#13;
chown -R user1 directory1 æ”¹å˜ä¸€ä¸ªç›®å½•çš„æ‰€æœ‰äººå±æ€§å¹¶åŒæ—¶æ”¹å˜æ”¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å±æ€§&#13;
chgrp group1 file1 æ”¹å˜æ–‡ä»¶çš„ç¾¤ç»„&#13;
chown user1:group1 file1 æ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰äººå’Œç¾¤ç»„å±æ€§&#13;
find / -perm -u+s ç½—åˆ—ä¸€ä¸ªç³»ç»Ÿä¸­æ‰€æœ‰ä½¿ç”¨äº†SUIDæ§åˆ¶çš„æ–‡ä»¶&#13;
chmod u+s /bin/file1 è®¾ç½®ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ SUID ä½ - è¿è¡Œè¯¥æ–‡ä»¶çš„ç”¨æˆ·ä¹Ÿè¢«èµ‹äºˆå’Œæ‰€æœ‰è€…åŒæ ·çš„æƒé™&#13;
chmod u-s /bin/file1 ç¦ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ SUIDä½&#13;
chmod g+s /home/public è®¾ç½®ä¸€ä¸ªç›®å½•çš„SGID ä½ - ç±»ä¼¼SUID ï¼Œä¸è¿‡è¿™æ˜¯é’ˆå¯¹ç›®å½•çš„&#13;
chmod g-s /home/public ç¦ç”¨ä¸€ä¸ªç›®å½•çš„ SGID ä½&#13;
chmod o+t /home/public è®¾ç½®ä¸€ä¸ªæ–‡ä»¶çš„ STIKY ä½ - åªå…è®¸åˆæ³•æ‰€æœ‰äººåˆ é™¤æ–‡ä»¶&#13;
chmod o-t /home/public ç¦ç”¨ä¸€ä¸ªç›®å½•çš„ STIKY ä½&#13;
chmod +x æ–‡ä»¶è·¯å¾„ ä¸ºæ‰€æœ‰è€…ã€æ‰€å±ç»„å’Œå…¶ä»–ç”¨æˆ·æ·»åŠ æ‰§è¡Œçš„æƒé™&#13;
chmod -x æ–‡ä»¶è·¯å¾„ ä¸ºæ‰€æœ‰è€…ã€æ‰€å±ç»„å’Œå…¶ä»–ç”¨æˆ·åˆ é™¤æ‰§è¡Œçš„æƒé™&#13;
chmod u+x æ–‡ä»¶è·¯å¾„ ä¸ºæ‰€æœ‰è€…æ·»åŠ æ‰§è¡Œçš„æƒé™&#13;
chmod g+x æ–‡ä»¶è·¯å¾„ ä¸ºæ‰€å±ç»„æ·»åŠ æ‰§è¡Œçš„æƒé™&#13;
chmod o+x æ–‡ä»¶è·¯å¾„ ä¸ºå…¶ä»–ç”¨æˆ·æ·»åŠ æ‰§è¡Œçš„æƒé™&#13;
chmod ug+x æ–‡ä»¶è·¯å¾„ ä¸ºæ‰€æœ‰è€…ã€æ‰€å±ç»„æ·»åŠ æ‰§è¡Œçš„æƒé™&#13;
chmod =wx æ–‡ä»¶è·¯å¾„ ä¸ºæ‰€æœ‰è€…ã€æ‰€å±ç»„å’Œå…¶ä»–ç”¨æˆ·æ·»åŠ å†™ã€æ‰§è¡Œçš„æƒé™ï¼Œå–æ¶ˆè¯»æƒé™&#13;
chmod ug=wx æ–‡ä»¶è·¯å¾„ ä¸ºæ‰€æœ‰è€…ã€æ‰€å±ç»„æ·»åŠ å†™ã€æ‰§è¡Œçš„æƒé™ï¼Œå–æ¶ˆè¯»æƒé™&#13;
```&#13;
9ã€æ–‡ä»¶çš„ç‰¹æ®Šå±æ€§&#13;
ä½¿ç”¨ â€œ+â€ è®¾ç½®æƒé™ï¼Œä½¿ç”¨ â€œ-â€ ç”¨äºå–æ¶ˆ&#13;
```shell&#13;
chattr +a file1 åªå…è®¸ä»¥è¿½åŠ æ–¹å¼è¯»å†™æ–‡ä»¶&#13;
chattr +c file1 å…è®¸è¿™ä¸ªæ–‡ä»¶èƒ½è¢«å†…æ ¸è‡ªåŠ¨å‹ç¼©/è§£å‹&#13;
chattr +d file1 åœ¨è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿå¤‡ä»½æ—¶ï¼Œdumpç¨‹åºå°†å¿½ç•¥è¿™ä¸ªæ–‡ä»¶&#13;
chattr +i file1 è®¾ç½®æˆä¸å¯å˜çš„æ–‡ä»¶ï¼Œä¸èƒ½è¢«åˆ é™¤ã€ä¿®æ”¹ã€é‡å‘½åæˆ–è€…é“¾æ¥&#13;
chattr +s file1 å…è®¸ä¸€ä¸ªæ–‡ä»¶è¢«å®‰å…¨åœ°åˆ é™¤&#13;
chattr +S file1 ä¸€æ—¦åº”ç”¨ç¨‹åºå¯¹è¿™ä¸ªæ–‡ä»¶æ‰§è¡Œäº†å†™æ“ä½œï¼Œä½¿ç³»ç»Ÿç«‹åˆ»æŠŠä¿®æ”¹çš„ç»“æœå†™åˆ°ç£ç›˜&#13;
chattr +u file1 è‹¥æ–‡ä»¶è¢«åˆ é™¤ï¼Œç³»ç»Ÿä¼šå…è®¸ä½ åœ¨ä»¥åæ¢å¤è¿™ä¸ªè¢«åˆ é™¤çš„æ–‡ä»¶&#13;
lsattr æ˜¾ç¤ºç‰¹æ®Šçš„å±æ€§&#13;
```&#13;
10ã€æ‰“åŒ…å’Œå‹ç¼©æ–‡ä»¶&#13;
```shell&#13;
bunzip2 file1.bz2 è§£å‹ä¸€ä¸ªå«åš 'file1.bz2'çš„æ–‡ä»¶&#13;
bzip2 file1 å‹ç¼©ä¸€ä¸ªå«åš 'file1' çš„æ–‡ä»¶&#13;
gunzip file1.gz è§£å‹ä¸€ä¸ªå«åš 'file1.gz'çš„æ–‡ä»¶&#13;
gzip file1 å‹ç¼©ä¸€ä¸ªå«åš 'file1'çš„æ–‡ä»¶&#13;
gzip -9 file1 æœ€å¤§ç¨‹åº¦å‹ç¼©&#13;
rar a file1.rar test_file åˆ›å»ºä¸€ä¸ªå«åš 'file1.rar' çš„åŒ…&#13;
rar a file1.rar file1 file2 dir1 åŒæ—¶å‹ç¼© 'file1', 'file2' ä»¥åŠç›®å½• 'dir1'&#13;
rar x file1.rar è§£å‹raråŒ…&#13;
unrar x file1.rar è§£å‹raråŒ…&#13;
tar -cvf archive.tar file1 åˆ›å»ºä¸€ä¸ªéå‹ç¼©çš„ tarball&#13;
tar -cvf archive.tar file1 file2 dir1 åˆ›å»ºä¸€ä¸ªåŒ…å«äº† 'file1', 'file2' ä»¥åŠ 'dir1'çš„æ¡£æ¡ˆæ–‡ä»¶&#13;
tar -tf archive.tar æ˜¾ç¤ºä¸€ä¸ªåŒ…ä¸­çš„å†…å®¹&#13;
tar -xvf archive.tar é‡Šæ”¾ä¸€ä¸ªåŒ…&#13;
tar -xvf archive.tar -C /tmp å°†å‹ç¼©åŒ…é‡Šæ”¾åˆ° /tmpç›®å½•ä¸‹&#13;
tar -cvfj archive.tar.bz2 dir1 åˆ›å»ºä¸€ä¸ªbzip2æ ¼å¼çš„å‹ç¼©åŒ…&#13;
tar -xvfj archive.tar.bz2 è§£å‹ä¸€ä¸ªbzip2æ ¼å¼çš„å‹ç¼©åŒ…&#13;
tar -cvfz archive.tar.gz dir1 åˆ›å»ºä¸€ä¸ªgzipæ ¼å¼çš„å‹ç¼©åŒ…&#13;
tar -xvfz archive.tar.gz è§£å‹ä¸€ä¸ªgzipæ ¼å¼çš„å‹ç¼©åŒ…&#13;
zip file1.zip file1 åˆ›å»ºä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ…&#13;
zip -r file1.zip file1 file2 dir1 å°†å‡ ä¸ªæ–‡ä»¶å’Œç›®å½•åŒæ—¶å‹ç¼©æˆä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ…&#13;
unzip file1.zip è§£å‹ä¸€ä¸ªzipæ ¼å¼å‹ç¼©åŒ…&#13;
```&#13;
11ã€RPM åŒ…&#13;
ï¼ˆFedora, RedhatåŠç±»ä¼¼ç³»ç»Ÿï¼‰&#13;
```shell&#13;
rpm -ivh package.rpm å®‰è£…ä¸€ä¸ªrpmåŒ…&#13;
rpm -ivh --nodeeps package.rpm å®‰è£…ä¸€ä¸ªrpmåŒ…è€Œå¿½ç•¥ä¾èµ–å…³ç³»è­¦å‘Š&#13;
rpm -U package.rpm æ›´æ–°ä¸€ä¸ªrpmåŒ…ä½†ä¸æ”¹å˜å…¶é…ç½®æ–‡ä»¶&#13;
rpm -F package.rpm æ›´æ–°ä¸€ä¸ªç¡®å®šå·²ç»å®‰è£…çš„rpmåŒ…&#13;
rpm -e package_name.rpm åˆ é™¤ä¸€ä¸ªrpmåŒ…&#13;
rpm -qa æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»å®‰è£…çš„rpmåŒ…&#13;
rpm -qa | grep httpd æ˜¾ç¤ºæ‰€æœ‰åç§°ä¸­åŒ…å« 'httpd' å­—æ ·çš„rpmåŒ…&#13;
rpm -qi package_name è·å–ä¸€ä¸ªå·²å®‰è£…åŒ…çš„ç‰¹æ®Šä¿¡æ¯&#13;
rpm -qg 'System Environment/Daemons' æ˜¾ç¤ºä¸€ä¸ªç»„ä»¶çš„rpmåŒ…&#13;
rpm -ql package_name æ˜¾ç¤ºä¸€ä¸ªå·²ç»å®‰è£…çš„rpmåŒ…æä¾›çš„æ–‡ä»¶åˆ—è¡¨&#13;
rpm -qc package_name æ˜¾ç¤ºä¸€ä¸ªå·²ç»å®‰è£…çš„rpmåŒ…æä¾›çš„é…ç½®æ–‡ä»¶åˆ—è¡¨&#13;
rpm -q package_name --whatrequires æ˜¾ç¤ºä¸ä¸€ä¸ªrpmåŒ…å­˜åœ¨ä¾èµ–å…³ç³»çš„åˆ—è¡¨&#13;
rpm -q package_name --whatprovides æ˜¾ç¤ºä¸€ä¸ªrpmåŒ…æ‰€å çš„ä½“ç§¯&#13;
rpm -q package_name --scripts æ˜¾ç¤ºåœ¨å®‰è£…/åˆ é™¤æœŸé—´æ‰€æ‰§è¡Œçš„è„šæœ¬l&#13;
rpm -q package_name --changelog æ˜¾ç¤ºä¸€ä¸ªrpmåŒ…çš„ä¿®æ”¹å†å²&#13;
rpm -qf /etc/httpd/conf/httpd.conf ç¡®è®¤æ‰€ç»™çš„æ–‡ä»¶ç”±å“ªä¸ªrpmåŒ…æ‰€æä¾›&#13;
rpm -qp package.rpm -l æ˜¾ç¤ºç”±ä¸€ä¸ªå°šæœªå®‰è£…çš„rpmåŒ…æä¾›çš„æ–‡ä»¶åˆ—è¡¨&#13;
rpm --import /media/cdrom/RPM-GPG-KEY å¯¼å…¥å…¬é’¥æ•°å­—è¯ä¹¦&#13;
rpm --checksig package.rpm ç¡®è®¤ä¸€ä¸ªrpmåŒ…çš„å®Œæ•´æ€§&#13;
rpm -qa gpg-pubkey ç¡®è®¤å·²å®‰è£…çš„æ‰€æœ‰rpmåŒ…çš„å®Œæ•´æ€§&#13;
rpm -V package_name æ£€æŸ¥æ–‡ä»¶å°ºå¯¸ã€ è®¸å¯ã€ç±»å‹ã€æ‰€æœ‰è€…ã€ç¾¤ç»„ã€MD5æ£€æŸ¥ä»¥åŠæœ€åä¿®æ”¹æ—¶é—´&#13;
rpm -Va æ£€æŸ¥ç³»ç»Ÿä¸­æ‰€æœ‰å·²å®‰è£…çš„rpmåŒ…- å°å¿ƒä½¿ç”¨&#13;
rpm -Vp package.rpm ç¡®è®¤ä¸€ä¸ªrpmåŒ…è¿˜æœªå®‰è£…&#13;
rpm2cpio package.rpm | cpio --extract --make-directories *bin* ä»ä¸€ä¸ªrpmåŒ…è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶&#13;
rpm -ivh /usr/src/redhat/RPMS/`arch`/package.rpm ä»ä¸€ä¸ªrpmæºç å®‰è£…ä¸€ä¸ªæ„å»ºå¥½çš„åŒ…&#13;
rpmbuild --rebuild package_name.src.rpm ä»ä¸€ä¸ªrpmæºç æ„å»ºä¸€ä¸ª rpm åŒ…&#13;
```&#13;
12ã€YUM è½¯ä»¶åŒ…å‡çº§å™¨&#13;
ï¼ˆFedora, RedHatåŠç±»ä¼¼ç³»ç»Ÿï¼‰&#13;
```shell&#13;
yum install package_name ä¸‹è½½å¹¶å®‰è£…ä¸€ä¸ªrpmåŒ…&#13;
yum localinstall package_name.rpm å°†å®‰è£…ä¸€ä¸ªrpmåŒ…ï¼Œä½¿ç”¨ä½ è‡ªå·±çš„è½¯ä»¶ä»“åº“ä¸ºä½ è§£å†³æ‰€æœ‰ä¾èµ–å…³ç³»&#13;
yum update package_name.rpm æ›´æ–°å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å®‰è£…çš„rpmåŒ…&#13;
yum update package_name æ›´æ–°ä¸€ä¸ªrpmåŒ…&#13;
yum remove package_name åˆ é™¤ä¸€ä¸ªrpmåŒ…&#13;
yum list åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­å®‰è£…çš„æ‰€æœ‰åŒ…&#13;
yum search package_name åœ¨rpmä»“åº“ä¸­æœå¯»è½¯ä»¶åŒ…&#13;
yum clean packages æ¸…ç†rpmç¼“å­˜åˆ é™¤ä¸‹è½½çš„åŒ…&#13;
yum clean headers åˆ é™¤æ‰€æœ‰å¤´æ–‡ä»¶&#13;
yum clean all åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„åŒ…å’Œå¤´æ–‡ä»¶&#13;
```&#13;
13ã€DEB åŒ…&#13;
(Debian, Ubuntu ä»¥åŠç±»ä¼¼ç³»ç»Ÿ)&#13;
```shell&#13;
dpkg -i package.deb å®‰è£…/æ›´æ–°ä¸€ä¸ª deb åŒ…&#13;
dpkg -r package_name ä»ç³»ç»Ÿåˆ é™¤ä¸€ä¸ª deb åŒ…&#13;
dpkg -l æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»å®‰è£…çš„ deb åŒ…&#13;
dpkg -l | grep httpd æ˜¾ç¤ºæ‰€æœ‰åç§°ä¸­åŒ…å« 'httpd' å­—æ ·çš„debåŒ…&#13;
dpkg -s package_name è·å¾—å·²ç»å®‰è£…åœ¨ç³»ç»Ÿä¸­ä¸€ä¸ªç‰¹æ®ŠåŒ…çš„ä¿¡æ¯&#13;
dpkg -L package_name æ˜¾ç¤ºç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„ä¸€ä¸ªdebåŒ…æ‰€æä¾›çš„æ–‡ä»¶åˆ—è¡¨&#13;
dpkg --contents package.deb æ˜¾ç¤ºå°šæœªå®‰è£…çš„ä¸€ä¸ªåŒ…æ‰€æä¾›çš„æ–‡ä»¶åˆ—è¡¨&#13;
dpkg -S /bin/ping ç¡®è®¤æ‰€ç»™çš„æ–‡ä»¶ç”±å“ªä¸ªdebåŒ…æä¾›&#13;
APT è½¯ä»¶å·¥å…· (Debian, Ubuntu ä»¥åŠç±»ä¼¼ç³»ç»Ÿ)&#13;
apt-get install package_name å®‰è£…/æ›´æ–°ä¸€ä¸ª deb åŒ…&#13;
apt-cdrom install package_name ä»å…‰ç›˜å®‰è£…/æ›´æ–°ä¸€ä¸ª deb åŒ…&#13;
apt-get update å‡çº§åˆ—è¡¨ä¸­çš„è½¯ä»¶åŒ…&#13;
apt-get upgrade å‡çº§æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶&#13;
apt-get remove package_name ä»ç³»ç»Ÿåˆ é™¤ä¸€ä¸ªdebåŒ…&#13;
apt-get check ç¡®è®¤ä¾èµ–çš„è½¯ä»¶ä»“åº“æ­£ç¡®&#13;
apt-get clean ä»ä¸‹è½½çš„è½¯ä»¶åŒ…ä¸­æ¸…ç†ç¼“å­˜&#13;
apt-cache search searched-package è¿”å›åŒ…å«æ‰€è¦æœç´¢å­—ç¬¦ä¸²çš„è½¯ä»¶åŒ…åç§°&#13;
```&#13;
14ã€æŸ¥çœ‹æ–‡ä»¶å†…å®¹&#13;
```shell&#13;
cat file1 ä»ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹æ­£å‘æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹&#13;
tac file1 ä»æœ€åä¸€è¡Œå¼€å§‹åå‘æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹&#13;
more file1 æŸ¥çœ‹ä¸€ä¸ªé•¿æ–‡ä»¶çš„å†…å®¹&#13;
less file1 ç±»ä¼¼äº 'more' å‘½ä»¤ï¼Œä½†æ˜¯å®ƒå…è®¸åœ¨æ–‡ä»¶ä¸­å’Œæ­£å‘æ“ä½œä¸€æ ·çš„åå‘æ“ä½œ&#13;
head -2 file1 æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å‰ä¸¤è¡Œ&#13;
tail -2 file1 æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„æœ€åä¸¤è¡Œ&#13;
tail -f /var/log/messages å®æ—¶æŸ¥çœ‹è¢«æ·»åŠ åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹&#13;
```&#13;
15ã€æ–‡æœ¬å¤„ç†&#13;
```shell&#13;
cat file1 file2 ... | command &lt;&gt; file1_in.txt_or_file1_out.txt general syntax for text manipulation using PIPE, STDIN and STDOUT&#13;
cat file1 | command( sed, grep, awk, grep, etc...) &gt; result.txt åˆå¹¶ä¸€ä¸ªæ–‡ä»¶çš„è¯¦ç»†è¯´æ˜æ–‡æœ¬ï¼Œå¹¶å°†ç®€ä»‹å†™å…¥ä¸€ä¸ªæ–°æ–‡ä»¶ä¸­&#13;
cat file1 | command( sed, grep, awk, grep, etc...) &gt;&gt; result.txt åˆå¹¶ä¸€ä¸ªæ–‡ä»¶çš„è¯¦ç»†è¯´æ˜æ–‡æœ¬ï¼Œå¹¶å°†ç®€ä»‹å†™å…¥ä¸€ä¸ªå·²æœ‰çš„æ–‡ä»¶ä¸­&#13;
grep Aug /var/log/messages åœ¨æ–‡ä»¶ '/var/log/messages'ä¸­æŸ¥æ‰¾å…³é”®è¯'Aug'&#13;
grep ^Aug /var/log/messages åœ¨æ–‡ä»¶ '/var/log/messages'ä¸­æŸ¥æ‰¾ä»¥'Aug'å¼€å§‹çš„è¯æ±‡&#13;
grep [0-9] /var/log/messages é€‰æ‹© '/var/log/messages' æ–‡ä»¶ä¸­æ‰€æœ‰åŒ…å«æ•°å­—çš„è¡Œ&#13;
grep Aug -R /var/log/* åœ¨ç›®å½• '/var/log' åŠéšåçš„ç›®å½•ä¸­æœç´¢å­—ç¬¦ä¸²'Aug'&#13;
sed 's/stringa1/stringa2/g' example.txt å°†example.txtæ–‡ä»¶ä¸­çš„ 'string1' æ›¿æ¢æˆ 'string2'&#13;
sed '/^$/d' example.txt ä»example.txtæ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰ç©ºç™½è¡Œ&#13;
sed '/ *#/d; /^$/d' example.txt ä»example.txtæ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰æ³¨é‡Šå’Œç©ºç™½è¡Œ&#13;
echo 'esempio' | tr '[:lower:]' '[:upper:]' åˆå¹¶ä¸Šä¸‹å•å…ƒæ ¼å†…å®¹&#13;
sed -e '1d' result.txt ä»æ–‡ä»¶example.txt ä¸­æ’é™¤ç¬¬ä¸€è¡Œ&#13;
sed -n '/stringa1/p' æŸ¥çœ‹åªåŒ…å«è¯æ±‡ 'string1'çš„è¡Œ&#13;
sed -e 's/ *$//' example.txt åˆ é™¤æ¯ä¸€è¡Œæœ€åçš„ç©ºç™½å­—ç¬¦&#13;
sed -e 's/stringa1//g' example.txt ä»æ–‡æ¡£ä¸­åªåˆ é™¤è¯æ±‡ 'string1' å¹¶ä¿ç•™å‰©ä½™å…¨éƒ¨&#13;
sed -n '1,5p;5q' example.txt æŸ¥çœ‹ä»ç¬¬ä¸€è¡Œåˆ°ç¬¬5è¡Œå†…å®¹&#13;
sed -n '5p;5q' example.txt æŸ¥çœ‹ç¬¬5è¡Œ&#13;
sed -e 's/00*/0/g' example.txt ç”¨å•ä¸ªé›¶æ›¿æ¢å¤šä¸ªé›¶&#13;
cat -n file1 æ ‡ç¤ºæ–‡ä»¶çš„è¡Œæ•°&#13;
cat example.txt | awk 'NR%2==1' åˆ é™¤example.txtæ–‡ä»¶ä¸­çš„æ‰€æœ‰å¶æ•°è¡Œ&#13;
echo a b c | awk '{print $1}' æŸ¥çœ‹ä¸€è¡Œç¬¬ä¸€æ &#13;
echo a b c | awk '{print $1,$3}' æŸ¥çœ‹ä¸€è¡Œçš„ç¬¬ä¸€å’Œç¬¬ä¸‰æ &#13;
paste file1 file2 åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶æˆ–ä¸¤æ çš„å†…å®¹&#13;
paste -d '+' file1 file2 åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶æˆ–ä¸¤æ çš„å†…å®¹ï¼Œä¸­é—´ç”¨'+'åŒºåˆ†&#13;
sort file1 file2 æ’åºä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹&#13;
sort file1 file2 | uniq å–å‡ºä¸¤ä¸ªæ–‡ä»¶çš„å¹¶é›†(é‡å¤çš„è¡Œåªä¿ç•™ä¸€ä»½)&#13;
sort file1 file2 | uniq -u åˆ é™¤äº¤é›†ï¼Œç•™ä¸‹å…¶ä»–çš„è¡Œ&#13;
sort file1 file2 | uniq -d å–å‡ºä¸¤ä¸ªæ–‡ä»¶çš„äº¤é›†(åªç•™ä¸‹åŒæ—¶å­˜åœ¨äºä¸¤ä¸ªæ–‡ä»¶ä¸­çš„æ–‡ä»¶)&#13;
comm -1 file1 file2 æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹åªåˆ é™¤ 'file1' æ‰€åŒ…å«çš„å†…å®¹&#13;
comm -2 file1 file2 æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹åªåˆ é™¤ 'file2' æ‰€åŒ…å«çš„å†…å®¹&#13;
comm -3 file1 file2 æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹åªåˆ é™¤ä¸¤ä¸ªæ–‡ä»¶å…±æœ‰çš„éƒ¨åˆ†&#13;
```&#13;
16ã€å­—ç¬¦è®¾ç½®å’Œæ–‡ä»¶æ ¼å¼è½¬æ¢&#13;
```shell&#13;
dos2unix filedos.txt fileunix.txt å°†ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„æ ¼å¼ä»MSDOSè½¬æ¢æˆUNIX&#13;
unix2dos fileunix.txt filedos.txt å°†ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„æ ¼å¼ä»UNIXè½¬æ¢æˆMSDOS&#13;
recode ..HTML &lt; page.txt &gt; page.html å°†ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶è½¬æ¢æˆhtml&#13;
recode -l | more æ˜¾ç¤ºæ‰€æœ‰å…è®¸çš„è½¬æ¢æ ¼å¼&#13;
```&#13;
17ã€æ–‡ä»¶ç³»ç»Ÿåˆ†æ&#13;
```shell&#13;
badblocks -v /dev/hda1 æ£€æŸ¥ç£ç›˜hda1ä¸Šçš„åç£å—&#13;
fsck /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šlinuxæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
fsck.ext2 /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext2æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
e2fsck /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext2æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
e2fsck -j /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext3æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
fsck.ext3 /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext3æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
fsck.vfat /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šfatæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
fsck.msdos /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šdosæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
dosfsck /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šdosæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§&#13;
```&#13;
18ã€åˆå§‹åŒ–ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ&#13;
```shell&#13;
mkfs /dev/hda1 åœ¨hda1åˆ†åŒºåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ&#13;
mke2fs /dev/hda1 åœ¨hda1åˆ†åŒºåˆ›å»ºä¸€ä¸ªlinux ext2çš„æ–‡ä»¶ç³»ç»Ÿ&#13;
mke2fs -j /dev/hda1 åœ¨hda1åˆ†åŒºåˆ›å»ºä¸€ä¸ªlinux ext3(æ—¥å¿—å‹)çš„æ–‡ä»¶ç³»ç»Ÿ&#13;
mkfs -t vfat 32 -F /dev/hda1 åˆ›å»ºä¸€ä¸ª FAT32 æ–‡ä»¶ç³»ç»Ÿ&#13;
fdformat -n /dev/fd0 æ ¼å¼åŒ–ä¸€ä¸ªè½¯ç›˜&#13;
mkswap /dev/hda3 åˆ›å»ºä¸€ä¸ªswapæ–‡ä»¶ç³»ç»Ÿ&#13;
```&#13;
19ã€SWAPæ–‡ä»¶ç³»ç»Ÿ&#13;
```shell&#13;
mkswap /dev/hda3 åˆ›å»ºä¸€ä¸ªswapæ–‡ä»¶ç³»ç»Ÿ&#13;
swapon /dev/hda3 å¯ç”¨ä¸€ä¸ªæ–°çš„swapæ–‡ä»¶ç³»ç»Ÿ&#13;
swapon /dev/hda2 /dev/hdb3 å¯ç”¨ä¸¤ä¸ªswapåˆ†åŒº&#13;
```&#13;
20ã€å¤‡ä»½&#13;
```shell&#13;
dump -0aj -f /tmp/home0.bak /home åˆ¶ä½œä¸€ä¸ª '/home' ç›®å½•çš„å®Œæ•´å¤‡ä»½&#13;
dump -1aj -f /tmp/home0.bak /home åˆ¶ä½œä¸€ä¸ª '/home' ç›®å½•çš„äº¤äº’å¼å¤‡ä»½&#13;
restore -if /tmp/home0.bak è¿˜åŸä¸€ä¸ªäº¤äº’å¼å¤‡ä»½&#13;
rsync -rogpav --delete /home /tmp åŒæ­¥ä¸¤è¾¹çš„ç›®å½•&#13;
rsync -rogpav -e ssh --delete /home ip_address:/tmp é€šè¿‡SSHé€šé“rsync&#13;
rsync -az -e ssh --delete ip_addr:/home/public /home/local é€šè¿‡sshå’Œå‹ç¼©å°†ä¸€ä¸ªè¿œç¨‹ç›®å½•åŒæ­¥åˆ°æœ¬åœ°ç›®å½•&#13;
rsync -az -e ssh --delete /home/local ip_addr:/home/public é€šè¿‡sshå’Œå‹ç¼©å°†æœ¬åœ°ç›®å½•åŒæ­¥åˆ°è¿œç¨‹ç›®å½•&#13;
dd bs=1M if=/dev/hda | gzip | ssh user@ip_addr 'dd of=hda.gz' é€šè¿‡sshåœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œä¸€æ¬¡å¤‡ä»½æœ¬åœ°ç£ç›˜çš„æ“ä½œ&#13;
dd if=/dev/sda of=/tmp/file1 å¤‡ä»½ç£ç›˜å†…å®¹åˆ°ä¸€ä¸ªæ–‡ä»¶&#13;
tar -Puf backup.tar /home/user æ‰§è¡Œä¸€æ¬¡å¯¹ '/home/user' ç›®å½•çš„äº¤äº’å¼å¤‡ä»½æ“ä½œ&#13;
( cd /tmp/local/ &amp;&amp; tar c . ) | ssh -C user@ip_addr 'cd /home/share/ &amp;&amp; tar x -p' é€šè¿‡sshåœ¨è¿œç¨‹ç›®å½•ä¸­å¤åˆ¶ä¸€ä¸ªç›®å½•å†…å®¹&#13;
( tar c /home ) | ssh -C user@ip_addr 'cd /home/backup-home &amp;&amp; tar x -p' é€šè¿‡sshåœ¨è¿œç¨‹ç›®å½•ä¸­å¤åˆ¶ä¸€ä¸ªæœ¬åœ°ç›®å½•&#13;
tar cf - . | (cd /tmp/backup ; tar xf - ) æœ¬åœ°å°†ä¸€ä¸ªç›®å½•å¤åˆ¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼Œä¿ç•™åŸæœ‰æƒé™åŠé“¾æ¥&#13;
find /home/user1 -name '*.txt' | xargs cp -av --target-directory=/home/backup/ --parents ä»ä¸€ä¸ªç›®å½•æŸ¥æ‰¾å¹¶å¤åˆ¶æ‰€æœ‰ä»¥ '.txt' ç»“å°¾çš„æ–‡ä»¶åˆ°å¦ä¸€ä¸ªç›®å½•&#13;
find /var/log -name '*.log' | tar cv --files-from=- | bzip2 &gt; log.tar.bz2 æŸ¥æ‰¾æ‰€æœ‰ä»¥ '.log' ç»“å°¾çš„æ–‡ä»¶å¹¶åšæˆä¸€ä¸ªbzipåŒ…&#13;
dd if=/dev/hda of=/dev/fd0 bs=512 count=1 åšä¸€ä¸ªå°† MBR (Master Boot Record)å†…å®¹å¤åˆ¶åˆ°è½¯ç›˜çš„åŠ¨ä½œ&#13;
dd if=/dev/fd0 of=/dev/hda bs=512 count=1 ä»å·²ç»ä¿å­˜åˆ°è½¯ç›˜çš„å¤‡ä»½ä¸­æ¢å¤MBRå†…å®¹&#13;
```&#13;
21ã€å…‰ç›˜&#13;
```shell&#13;
cdrecord -v gracetime=2 dev=/dev/cdrom -eject blank=fast -force æ¸…ç©ºä¸€ä¸ªå¯å¤å†™çš„å…‰ç›˜å†…å®¹&#13;
mkisofs /dev/cdrom &gt; cd.iso åœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªå…‰ç›˜çš„isoé•œåƒæ–‡ä»¶&#13;
mkisofs /dev/cdrom | gzip &gt; cd_iso.gz åœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªå‹ç¼©äº†çš„å…‰ç›˜isoé•œåƒæ–‡ä»¶&#13;
mkisofs -J -allow-leading-dots -R -V 'Label CD' -iso-level 4 -o ./cd.iso data_cd åˆ›å»ºä¸€ä¸ªç›®å½•çš„isoé•œåƒæ–‡ä»¶&#13;
cdrecord -v dev=/dev/cdrom cd.iso åˆ»å½•ä¸€ä¸ªISOé•œåƒæ–‡ä»¶&#13;
gzip -dc cd_iso.gz | cdrecord dev=/dev/cdrom - åˆ»å½•ä¸€ä¸ªå‹ç¼©äº†çš„ISOé•œåƒæ–‡ä»¶&#13;
mount -o loop cd.iso /mnt/iso æŒ‚è½½ä¸€ä¸ªISOé•œåƒæ–‡ä»¶&#13;
cd-paranoia -B ä»ä¸€ä¸ªCDå…‰ç›˜è½¬å½•éŸ³è½¨åˆ° wav æ–‡ä»¶ä¸­&#13;
cd-paranoia -- '-3' ä»ä¸€ä¸ªCDå…‰ç›˜è½¬å½•éŸ³è½¨åˆ° wav æ–‡ä»¶ä¸­ï¼ˆå‚æ•°-3ï¼‰&#13;
cdrecord --scanbus æ‰«ææ€»çº¿ä»¥è¯†åˆ«scsié€šé“&#13;
dd if=/dev/hdc | md5sum æ ¡éªŒä¸€ä¸ªè®¾å¤‡çš„md5sumç¼–ç ï¼Œä¾‹å¦‚ä¸€å¼  CD&#13;
```&#13;
22ã€ç½‘ç»œ&#13;
ï¼ˆä»¥å¤ªç½‘å’ŒWIFIæ— çº¿ï¼‰&#13;
```shell&#13;
ifconfig eth0 æ˜¾ç¤ºä¸€ä¸ªä»¥å¤ªç½‘å¡çš„é…ç½®&#13;
ifup eth0 å¯ç”¨ä¸€ä¸ª 'eth0' ç½‘ç»œè®¾å¤‡&#13;
ifdown eth0 ç¦ç”¨ä¸€ä¸ª 'eth0' ç½‘ç»œè®¾å¤‡&#13;
ifconfig eth0 192.168.1.1 netmask 255.255.255.0 æ§åˆ¶IPåœ°å€&#13;
ifconfig eth0 promisc è®¾ç½® 'eth0' æˆæ··æ‚æ¨¡å¼ä»¥å—…æ¢æ•°æ®åŒ… (sniffing)&#13;
dhclient eth0 ä»¥dhcpæ¨¡å¼å¯ç”¨ 'eth0'&#13;
route -n show routing table&#13;
route add -net 0/0 gw IP_Gateway configura default gateway&#13;
route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1 configure static route to reach network '192.168.0.0/16'&#13;
route del 0/0 gw IP_gateway remove static route&#13;
echo '1' &gt; /proc/sys/net/ipv4/ip_forward activate ip routing&#13;
hostname show hostname of system&#13;
host www.example.com lookup hostname to resolve name to ip address and viceversa(1)&#13;
nslookup www.example.com lookup hostname to resolve name to ip address and viceversa(2)&#13;
ip link show show link status of all interfaces&#13;
mii-tool eth0 show link status of 'eth0'&#13;
ethtool eth0 show statistics of network card 'eth0'&#13;
netstat -tup show all active network connections and their PID&#13;
netstat -tupl show all network services listening on the system and their PID&#13;
tcpdump tcp port 80 show all HTTP traffic&#13;
iwlist scan show wireless networks&#13;
iwconfig eth1 show configuration of a wireless network card&#13;
hostname show hostname&#13;
host www.example.com lookup hostname to resolve name to ip address and viceversa&#13;
nslookup www.example.com lookup hostname to resolve name to ip address and viceversa&#13;
whois www.example.com lookup on Whois database&#13;
```&#13;
23ã€åˆ—å‡ºç›®å½•å†…å®¹&#13;
```shell&#13;
ls -aï¼šæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰ï¼›&#13;
ls -lï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼›&#13;
ls -Rï¼šé€’å½’æ˜¾ç¤ºå­ç›®å½•ç»“æ„ï¼›&#13;
ls -ldï¼šæ˜¾ç¤ºç›®å½•å’Œé“¾æ¥ä¿¡æ¯ï¼›&#13;
ctrl+rï¼šå†å²è®°å½•ä¸­æ‰€æœå‘½ä»¤ï¼ˆè¾“å…¥å‘½ä»¤ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼‰ï¼›&#13;
Linuxä¸­ä»¥.å¼€å¤´çš„æ–‡ä»¶æ˜¯éšè—æ–‡ä»¶ï¼›&#13;
pwd:æ˜¾ç¤ºå½“å‰ç›®å½•&#13;
```&#13;
24ã€æŸ¥çœ‹æ–‡ä»¶çš„ç±»å‹&#13;
```shell&#13;
file:æŸ¥çœ‹æ–‡ä»¶çš„ç±»å‹&#13;
```&#13;
25ã€å¤åˆ¶æ–‡ä»¶ç›®å½•ç­‰æ“ä½œ&#13;
```shell&#13;
1ã€cpï¼šå¤åˆ¶æ–‡ä»¶å’Œç›®å½• cpæºæ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ç›®æ ‡æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰&#13;
å¸¸ç”¨å‚æ•°ï¼š-r:é€’å½’å¤åˆ¶æ•´ä¸ªç›®å½•æ ‘ï¼›-vï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼›å¤åˆ¶æ–‡ä»¶å¤¹æ—¶è¦åœ¨cpå‘½ä»¤åé¢åŠ ä¸€ä¸ª-rå‚æ•°ï¼šå¦‚ï¼šcp -r æºæ–‡ä»¶å¤¹ ç›®æ ‡æ–‡ä»¶å¤¹&#13;
2ã€touch+æ–‡ä»¶åï¼šå½“æ–‡ä»¶ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œåˆ›å»ºç›¸åº”çš„æ–‡ä»¶ï¼›å½“æ–‡ä»¶å­˜åœ¨çš„æ—¶å€™ï¼Œä¿®æ”¹æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ã€‚</description><guid isPermaLink="true">https://zacryder.github.io/post/Linux-ji-chu.html</guid><pubDate>Sun, 27 Oct 2024 03:43:19 +0000</pubDate></item><item><title>25å…ƒçŸ¿æ¸£çš„æè‡´</title><link>https://zacryder.github.io/post/25-yuan-kuang-zha-de-ji-zhi.html</link><description>æ¥ä¸Šé¢åšæ–‡ï¼Œé¦–å…ˆè¯´æ˜æƒ…å†µï¼Œå®¶é‡Œç”³è¯·äº†åŠ¨æ€IPï¼Œä½†æ˜¯æ— å¥ˆ80 443ç«¯å£è¢«å°  æ•…è€Œç”¨æ­¤åšå®¢ä¹Ÿæ˜¯å…¶ä¸­ä¸€ä¸ªåŸå› &#13;
&#13;
æ¥ä¸‹æ¥ï¼Œå¼€å§‹ä¸»è§’ï¼ŒçŸ¿æ¸£ç©å®¢äº‘ ä¸åˆ°30æµ·é²œå¸‚åœºæ·˜çš„&#13;
&#13;
åˆ·æœºæ•™ç¨‹ä¸€å †å † å°±ä¸è¯´äº†  æ•™ç¨‹ä¹ŸåŸºæœ¬éƒ½èƒ½æ‰¾åˆ°åˆ·æœºå·¥å…· USB Burning Toolï¼Œç¨å¾®æœ‰ç‚¹åŠ¨æ‰‹èƒ½åŠ› åŸºæœ¬ä¸Šéƒ½èƒ½åˆ·æˆåŠŸ  åˆ·åä¸è¡Œå†æ·˜ä¸€ä¸ª&#13;
&#13;
æä¾›ä¸€äº›èµ„æºå§  åˆ·æœºæ•™ç¨‹ (https://zhuanlan.zhihu.com/p/603845854  )å…¶ä¸­åˆ·æœºåŒ… (https://github.com/hzyitc/armbian-onecloud/releases)&#13;
&#13;
ä»”ç»†çœ‹ä¸Šé¢æ•™ç¨‹åŸºæœ¬éƒ½èƒ½æˆ&#13;
&#13;
å¥½äº†  æ¥ä¸‹æ¥æ˜¯æˆ‘çš„ç©å®¢äº‘åº”ç”¨  &#13;
&#13;
```bash&#13;
root@onecloud:~# cat /etc/os-release &#13;
PRETTY_NAME='Armbian-unofficial 24.5.0-trunk bookworm'&#13;
NAME='Debian GNU/Linux'&#13;
VERSION_ID='12'&#13;
VERSION='12 (bookworm)'&#13;
VERSION_CODENAME=bookworm&#13;
ID=debian&#13;
HOME_URL='https://www.armbian.com'&#13;
SUPPORT_URL='https://forum.armbian.com'&#13;
BUG_REPORT_URL='https://www.armbian.com/bugs'&#13;
ARMBIAN_PRETTY_NAME='Armbian-unofficial 24.5.0-trunk bookworm'&#13;
root@onecloud:~# docker ps&#13;
CONTAINER ID   IMAGE                              COMMAND                  CREATED      STATUS      PORTS                                                                                                              NAMES&#13;
660d227631ee   mzz2017/v2raya                     'v2raya'                 7 days ago   Up 7 days   0.0.0.0:2017-&gt;2017/tcp, :::2017-&gt;2017/tcp, 0.0.0.0:20170-20172-&gt;20170-20172/tcp, :::20170-20172-&gt;20170-20172/tcp   v2raya&#13;
f52056e51813   dr34m/tao-sync:latest              './taoSync'              7 days ago   Up 7 days   0.0.0.0:38023-&gt;8023/tcp, :::38023-&gt;8023/tcp                                                                        taoSync&#13;
5d9d20b2a2a7   b3log/siyuan                       '/opt/siyuan/kernel â€¦'   7 days ago   Up 7 days   0.0.0.0:6806-&gt;6806/tcp, :::6806-&gt;6806/tcp                                                                          siyuan-main-1&#13;
7fe070a8718f   jeessy/ddns-go                     '/app/ddns-go -l :98â€¦'   7 days ago   Up 7 days                                                                                                                      ddns-go&#13;
06bc688e9cfb   zackryder/certimate:0.1.15-armv7   './certimate serve -â€¦'   7 days ago   Up 7 days   0.0.0.0:38090-&gt;8090/tcp, :::38090-&gt;8090/tcp                                                                        certimate_server&#13;
2e17fc37fa6e   xhofe/alist:latest                 '/entrypoint.sh'         7 days ago   Up 7 days   0.0.0.0:5244-&gt;5244/tcp, :::5244-&gt;5244/tcp, 5245/tcp                                                                alist&#13;
```&#13;
&#13;
1. åœ¨ç©å®¢äº‘æ­äº†ä¸€ä¸ªopenvpn è¿™æ ·å°±å¯ä»¥éšæ—¶éšåœ°è¿œç¨‹äº†&#13;
å®‰è£…è„šæœ¬ï¼ˆhttps://github.com/angristan/openvpn-installï¼‰&#13;
&#13;
2. åœ¨ç©å®¢äº‘ä¸Šdocker éƒ¨ç½²äº†ä¸€æ‰‹ddns-go,æ¯å¤©ç”µä¿¡çš„è·¯ç”±å™¨4ç‚¹é‡å¯çš„æ—¶å€™ï¼ŒåŠ¨æ€IPåœ°å€å°±ä¼šå˜ï¼Œè¿™æ ·ä½¿ç”¨ddns ,é…åˆåŸŸåï¼Œæ¯å¤©è§£æåˆ°åŸŸåä¸Šï¼Œè¿™æ ·ç›¸å½“æœ‰ä¸€ä¸ªå›ºå®šIPäº†,ï¼ˆhttps://github.com/jeessy2/ddns-goï¼‰ddns-goçš„docker-compose.yml&#13;
```bash&#13;
name: ddns-go&#13;
services:&#13;
    ddns-go:&#13;
        container_name: ddns-go&#13;
        restart: always&#13;
        network_mode: host&#13;
        volumes:&#13;
            - ./ddns-go:/root&#13;
        image: jeessy/ddns-go&#13;
```&#13;
&#13;
3.v2rayaé¡¹ç›® ä»£ç†è½¯ä»¶ é…åˆ[SwitchyOmega] ï¼Œä¸Šgithubä¸ä¼šå†å»hostsäº†&#13;
(https://github.com/v2rayA/v2rayA)&#13;
```bash&#13;
version: '3'  &#13;
services:  &#13;
  v2raya:  &#13;
    image: mzz2017/v2raya  &#13;
    container_name: v2raya  &#13;
    restart: always  &#13;
    ports:  &#13;
      - '2017:2017'  &#13;
      - '20170-20172:20170-20172'  &#13;
    environment:  &#13;
      - TZ=Asia/Shanghai&#13;
      - V2RAYA_V2RAY_BIN=/usr/local/bin/v2ray  &#13;
      - V2RAYA_LOG_FILE=/tmp/v2raya.log  &#13;
    volumes:  &#13;
      - ./v2raya:/etc/v2raya&#13;
```&#13;
&#13;
4.alist å°é›… ä¸å¤šä»‹ç» æˆ‘æœ‰äº†æœ€å»‰ä»·Nas ä¸éœ€è¦ä¸€ä¸ªç ´æœºç®±åŠ é‚£äº›ç¡¬ç›˜äº†  ï¼Œè¡¥å……ä»¥å‰æœ‰ä¸€ä¸ªç§»åŠ¨ç¡¬ç›˜ç›’ ï¼Œç„¶åæœ‰ä¸€ä¸ª2.5å¯¸500Gç¡¬ç›˜ é…åˆç©å®¢äº‘usbå£  å¤Ÿç”¨çš„OK ï¼ˆhttps://github.com/AlistGo/alistï¼‰&#13;
```bash&#13;
version: '3.3'&#13;
services:&#13;
    alist:&#13;
        image: 'xhofe/alist:latest'&#13;
        container_name: alist&#13;
        volumes:&#13;
            - './alist:/opt/alist/data'&#13;
            - '/mnt/sda1:/mnt'&#13;
        ports:&#13;
            - '5244:5244'&#13;
        environment:&#13;
            - PUID=0&#13;
            - PGID=0&#13;
            - UMASK=022&#13;
        restart: unless-stopped&#13;
```&#13;
4.æ€æºç¬”è®°ï¼Œä»åŒäº‹é‚£é‡Œäº†è§£åˆ°ä¸€æ¬¾ç¬”è®°è½¯ä»¶ï¼Œæ²¡æ‘¸é€ã€‚</description><guid isPermaLink="true">https://zacryder.github.io/post/25-yuan-kuang-zha-de-ji-zhi.html</guid><pubDate>Fri, 18 Oct 2024 17:21:15 +0000</pubDate></item><item><title>åšå®¢æŠ˜è…¾ä¹‹è·¯</title><link>https://zacryder.github.io/post/bo-ke-zhe-teng-zhi-lu.html</link><description>å¥½å§ï¼Œå¼€å§‹å†™å†™ä¸ºå˜›é‡‡ç”¨äº†ç°åœ¨çš„åšå®¢ã€‚</description><guid isPermaLink="true">https://zacryder.github.io/post/bo-ke-zhe-teng-zhi-lu.html</guid><pubDate>Mon, 14 Oct 2024 14:16:46 +0000</pubDate></item><item><title>First Blog</title><link>https://zacryder.github.io/post/First%20Blog.html</link><description>Finally, I gave up the idea of building a blog on Onecloud. This is the first blog post on GitHubã€‚</description><guid isPermaLink="true">https://zacryder.github.io/post/First%20Blog.html</guid><pubDate>Sun, 13 Oct 2024 16:05:51 +0000</pubDate></item></channel></rss>